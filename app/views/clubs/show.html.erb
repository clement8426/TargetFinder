<div class="mx-auto md:w-2/3 w-full flex">
  <div class="mx-auto">


    <div class="py-4 px-6">
      <h3 class="text-lg font-medium text-gray-800"><%= @club.name %></h3>
      <p class="text-gray-600 text-base"><%= @club.address %></p>
      <p class="text-gray-600 text-base"><%= @club.description %></p>
      <h3 class="text-lg font-medium text-gray-800">Créateur : <%= @club.creator.present? ? @club.creator.name : "Inconnu" %></h3>
      <p class="text-gray-600 text-base">Éditeurs :</p>
      <ul>
        <% @club.editors.each do |editor| %>
          <li><%= editor.name %></li>
        <% end %>
      </ul>

      <%= link_to "Modifier ce club", edit_club_path(@club), class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
      <div class="inline-block ml-2">
        <%= button_to "Supprimer ce club", club_path(@club), method: :delete, class: "mt-2 rounded-lg py-3 px-5 bg-gray-100 font-medium" %>
      </div>
      <%= link_to "Retour aux clubs", clubs_path, class: "ml-2 rounded-lg py-3 px-5 bg-gray-100 inline-block font-medium" %>
      <button id="toggle-comment-form" class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow">Ajouter un commentaire</button>

      <div id="comment-form-container" class="hidden">
        <% if user_signed_in? %>
          <%= form_with(model: [@club, @club.comments.build], url: club_comments_path(@club), method: :post) do |form| %>
            <div class="field">
              <%= form.label :description, class: "block mb-2 text-sm font-medium text-gray-900" %>
              <%= form.text_area :description, class: "bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5", rows: 4, required: true %>
            </div>
            <div class="field">
              <%= form.label :note, class: "block mb-2 text-sm font-medium text-gray-900" %>
              <%= form.number_field :note, class: "bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5", min: 1, max: 5, required: true %>
            </div>
            <div class="actions">
              <%= form.submit "Ajouter commentaire", class: "text-black w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center" %>
            </div>
          <% end %>
        <% else %>
          <p>Connectez-vous pour ajouter un commentaire.</p>
        <% end %>
      </div>


      <div class="mt-4">
        <% if @comments.present? %>
          <h3 class="font-bold text-lg text-gray-800">Commentaires :</h3>
          <% @comments.each do |comment| %>
            <div class="bg-gray-200 rounded-lg p-3 mt-2">
              <p class="text-gray-800"><%= comment.description %></p>
              <% if comment.note? %>
                <span>
                  <p class="flex items-center text-gray-600">note:
                    <% comment.note.times do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-star">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z" />
                      </svg>
                    <% end %>
                  </p>
                </span>
              <% end %>
            </div>
          <% end %>
        <% else %>
          <h3 class="font-bold text-lg text-gray-800">Pas de Commentaires :</h3>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>
<script>
  document.getElementById('toggle-comment-form').addEventListener('click', function() {
    var commentFormContainer = document.getElementById('comment-form-container');
    if (commentFormContainer.classList.contains('hidden')) {
      commentFormContainer.classList.remove('hidden');
    } else {
      commentFormContainer.classList.add('hidden');
    }
  });
</script>
